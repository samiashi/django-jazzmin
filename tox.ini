[tox]
envlist =
    django4-{python3.8,python3.9,python3.10,python3.11,python3.12},
    # run one of the tests again but with coverage
    coveralls-django4-python3.11,
skipsdist = True

[gh-actions]
python =
    3.8: python3.8
    3.9: python3.9
    3.10: python3.10
    3.11: python3.11
    3.12: python3.12

[testenv]
setenv =
    PYTHONPATH = {toxinidir}
commands =
    {envpython} -m ruff format --check jazzmin
    {envpython} -m ruff check jazzmin
    {envpython} -m pytest
deps =
    pytest
    pytest-django
    pytest-cov
    coveralls
    mypy
    ruff
    beautifulsoup4
    factory-boy
    django4: Django<5

[testenv:coveralls-django4-python3.11]
passenv = COVERALLS_REPO_TOKEN
commands =
    mypy jazzmin --ignore-missing-imports
    ruff format --check jazzmin tests
    ruff check jazzmin tests
    pytest
    coveralls
